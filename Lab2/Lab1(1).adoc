:imagesdir: images:toc:= Отчет по лабораторной работе №1=== Задание к работе----а) Написать программу, вычисляющую следующее выражение -3/3U *3.б) Подключить плату к своему компьютеру, проверить что все работает, плата прошивается.в) Запустить на плате Lab1, добавить main код для зажигания светодиодов.г) Пронаблюдать, что произошло на плате и зафиксировать в виде фотографий.----=== Код программыНапишем программу, которая вычисляет выражение *-3/3U *3*, показанная на рисунке 1..Код программыimage::image-2021-09-30-12-20-32-540.png[]=== Вывод результата в Terminal I/O*Terminal I/O* - это подобие консоли, в которой можно наблюдать за результатом вывода программы. Чтобы отобразить окно Terminal I/O необходимо запустить код в режиме отладки *Ctrl+D* и затем в окне *View* выбрать *Terminal I/O*.Запустим код в режиме отладки и проверим результат нашей программы в окне Terminal I/O (рисунок 2)..Вывод результата программыimage::image-2021-09-30-12-24-10-807.png[]=== Подключение платыДля начала нужно посмотреть на саму плату и выяснить, нет ли каких-либо повреждений, если повреждений не обнаружено, то подлючаем нашу плату к компьютеру. Подключение платы к компьютеру показано на рисунке 3..Подключение платы к компьютеруimage::image-2021-09-30-13-28-18-085.png[]=== Прошивка платыДля начала нужно создать проект, после чего в свойствах проекта выберем модель микроконтроллера ST => STM32F4 => STM32F411 => ST STM32F411RE (рисунок 4). Для этого правой кнопкой мыши щелкнем по проекту, выберем Options и далее в категории General Option выберем вкладку Target..Выбор модели микроконтроллераimage::image-2021-09-30-13-34-03-596.png[]После чего запускаем проект. После того, как запутили проект, появилась ошибка *[Og007]: Assembler list file generation not allowed in this version of the compiler*. Для исправления этой ошибки необходимо в свойствах проекта выбрать *C/C++ Compiler* => *List* и убрать галочки с *Output assembler file* как показано на рисунке 5..C/C++ Compiler => Listimage::image-2021-09-30-13-46-45-906.png[]После повторного запуска проекта, нам удалось успешно прошить нашу плату. Это показано на рисунуе 6..Успешно прошитая платаimage::image-2021-09-30-13-49-42-275.png[]=== Подключение диодов на самой платеДля подключения файла *cstartup.cpp*, первым делом потребовалось его скачать. Для этого клонируем папку проекта преподавателя (рисунок 7), набрав в командной строке:----   https://github.com/lamer0k/stm32Labs.git----.Клонирование папкиimage::image-2021-09-30-14-01-46-366.png[]После того, как успешно склонировали папку, необходимо вернуться в свой проект и выбрать *Project* => *Add Existing Project* - это показано на рисунке 8..Project => Add Existing Projectimage::image-2021-09-30-14-07-25-346.png[]Далее выберем *iarproject.ewp* и нажмём открыть, что отображается на рисунке 9..iarproject.ewpimage::image-2021-09-30-14-16-32-292.png[]В опциях проекта в пункте *Debugger* выбираем в пункте *Driver* параметр *ST-LINK* вместо *Simulation*. Это показано на рисунке 10..Параметр ST-LINKimage::image-2021-09-30-14-22-24-699.png[]После всех проделанных действий, напишем код для включения светодиодов. Код для включения светодиодов представлен ниже:----#include "gpiocregisters.hpp" //for GPIOC#include "rccregisters.hpp" //for RCCint main(){ RCC::AHB1ENR::GPIOCEN::Enable::Set() ; GPIOC::MODER::MODER5::Output::Set() ; GPIOC::ODR::ODR5::Enable::Set() ; GPIOC::ODR::ODR5::Disable::Set() ; return 0 ;}----Запустим нашу программу и увидим, что никаких ошибок не обнаружено. Покажем окончательный результат на рисунке 11..Окончательный результат (плата с горящим светодиодом)image::image-2021-09-30-14-28-38-563.png[]